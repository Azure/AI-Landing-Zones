## Networking

| ID    | Specification |
|-------|--------------|
|  N-R1  | **DDoS:** The AI Landing Zone should provide guidance and implementation of Azure DDoS protection. In case of an existing platform landing zone, the central DDoS service should be used instead.<br><br>Best practice:<br><br>[Azure DDoS Protection](https://learn.microsoft.com/azure/ddos-protection/ddos-protection-overview) should be enabled to safeguard AI services from potential disruptions and downtime caused by distributed denial of service attacks. Enable protection at the virtual network level to defend against traffic floods targeting internet-facing applications.|
|  N-R2  | **Jump box & Bastion:** The AI Landing Zone should provide guidance and implementation of a jump box accessed through [Azure Bastion](https://learn.microsoft.com/azure/bastion/bastion-overview). In case of an existing platform landing zone, the central jump box and Bastion service should be used instead.<br><br>Best practice:<br><br>Use a jump box within the workload virtual network or a connectivity hub. Azure Bastion provides secure RDP/SSH without exposing VMs publicly. Ensure encrypted session data via TLS-based connections. |
|  N-R3  | **Private endpoints:** The AI Landing Zone should provide guidance and implementation of private endpoints for the AI services it deploys.<br><br>Best practice:<br><br>No PaaS services or AI model endpoints should be publicly accessible. Use private endpoints for Azure AI Foundry, Azure OpenAI, and Azure Machine Learning. Configure the [managed virtual network](https://learn.microsoft.com/azure/ai-studio/how-to/configure-managed-network) and [private endpoints](https://learn.microsoft.com/azure/ai-studio/how-to/configure-private-link). Restrict access via [virtual networks](https://learn.microsoft.com/azure/ai-services/cognitive-services-virtual-networks#scenarios). Create a [secure workspace](https://learn.microsoft.com/azure/machine-learning/tutorial-create-secure-workspace-vnet) and follow [network isolation planning](https://learn.microsoft.com/azure/machine-learning/how-to-network-isolation-planning) and [security best practices](https://learn.microsoft.com/azure/machine-learning/concept-enterprise-security). |
|  N-R4  | **Network security groups:** The AI Landing Zone should provide guidance and implementation of NSGs on all virtual networks implemented as part of the architecture.<br><br>Best practice:<br><br>Use [network security groups](https://learn.microsoft.com/azure/virtual-network/network-security-groups-overview) to enforce least privilege inbound and outbound traffic policies for AI workloads. |
|  N-R5  | **Azure Application Gateway or Azure Front Door with Web Application Firewall (WAF):** The AI Landing Zone should provide guidance and implementation of Azure Application Gateway or Azure Front Door with WAF for regional or global deployment.<br><br>Best practice:<br><br>Use [Azure Web Application Firewall](https://learn.microsoft.com/azure/web-application-firewall/overview) on [Azure Application Gateway](https://learn.microsoft.com/azure/web-application-firewall/ag/ag-overview) or [Azure Front Door](https://learn.microsoft.com/azure/web-application-firewall/afds/afds-overview) to mitigate common web threats. Combine with private endpoints for backend AI services. |
|  N-R6  | **APIM as AI gateway:** Provide guidance & implementation of APIM with AI Foundry.<br><br>Best practice:<br><br>Use [Azure API Management](https://learn.microsoft.com/azure/api-management/genai-gateway-capabilities#backend-load-balancer-and-circuit-breaker) as a generative AI gateway for token governance, routing, resiliency, content safety, semantic caching, and unified telemetry. Pair with Application Gateway / Front Door + WAF for edge protection.<br><br><u>Core capabilities</u>:<br>• Token limiting & metering (token-limit + emit-token-metric policies)<br>• Semantic caching (reduce repeated prompt cost)<br>• Backend load balancing & circuit breaker (PTU primary, standard fallback, regional failover)<br>• Content filtering (content safety, profanity guardrails)<br>• Request/response transformation (redact PII in logs)<br><br><u>Policy structure (example)</u>:<br>1. Inbound: AuthN (Entra), subscription key quota, token-limit, semantic cache lookup.<br>2. Backends: Priority route list (PTU → standard); circuit breaker around primary.<br>3. Outbound: Emit token metrics, semantic cache store (if eligible), response sanitation.<br><br><u>Implementation steps</u>:<br>1. Define each model deployment as an APIM backend; label with `deploymentType` (e.g., GlobalProvisioned).<br>2. Create policy fragments (`rate-limits.xml`, `semantic-cache.xml`, `routing-priority.xml`).<br>3. Attach fragments to product or API scope; store in source control for drift detection.<br>4. Enable private networking for APIM; restrict backend access to private endpoints.<br>5. Export token metrics & custom dimensions (`modelName`, `cacheHit`) to Log Analytics / App Insights.<br><br><u>Monitoring & alerts</u>: Watch sustained 429 rate, circuit breaker open duration, cache hit ratio, fallback traffic %.<br><br>Integrate APIM with Microsoft Entra ID for least privilege on the [managed identity](https://learn.microsoft.com/azure/api-management/api-management-howto-use-managed-service-identity). Reference: [Gateway guide](https://learn.microsoft.com/azure/architecture/ai-ml/guide/azure-openai-gateway-guide).|
|  N-R7  | **HTTPS everywhere:** The AI Landing Zone must implement HTTPS through Azure Application Gateway or Azure Front Door.<br><br>Best practice:<br><br>Use TLS to protect data integrity and confidentiality for internet-originating connections; route only encrypted traffic. |
|  N-R8  | **Azure Firewall:** The AI Landing Zone must provide guidance & implementation of a user-defined route (UDR) to Azure Firewall or approved third-party firewall where required.<br><br>Best practice:<br><br>[Azure Firewall](https://learn.microsoft.com/azure/firewall/overview) enforces egress policies and provides SNAT to conceal internal IPs. Control and monitor outgoing traffic; log for auditing. |
|  N-R9  | **Private DNS zones:** The AI Landing Zone should provide guidance and implementation of [integrated private endpoints with Private DNS Zones](https://learn.microsoft.com/azure/private-link/private-endpoint-dns-integration) for proper DNS resolution and private endpoint functionality.<br><br>Best practice:<br><br>Enforce private DNS zones and required private endpoints via policy. Configure conditional forwarding early; see [using custom DNS](https://learn.microsoft.com/azure/machine-learning/how-to-custom-dns). Ensure all PaaS resolution stays internal. |
|  N-R10  | **Restrict outbound by default:** The AI Landing Zone should guide and implement outbound restriction by default.<br><br>Best practice:<br><br>Limit outbound traffic to approved domains / services to reduce data exfiltration risk. Allow broader internet egress only when required (e.g., public ML resources) and monitor regularly. See [Azure AI services](https://learn.microsoft.com/azure/ai-services/cognitive-services-data-loss-prevention), [Azure AI Foundry](https://learn.microsoft.com/azure/ai-studio/how-to/configure-managed-network), [Azure Machine Learning](https://learn.microsoft.com/azure/machine-learning/how-to-network-isolation-planning#allow-only-approved-outbound-mode). |
|  N-R11  | **Virtual network planning:** The AI Landing Zone should provide prescriptive guidance for virtual networks, subnets, and IP address planning. |
