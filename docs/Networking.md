## Networking

| ID    | Specification |
|-------|--------------|
|  N-R1  | **DDoS**: The AI Landing Zone should provide guidance and implementation of Azure DDoS protection. In case of an existing platform landing zone, the central DDoS service should be used instead.<br><br>Best Practice:<br><br> [Azure DDoS Protection](https://learn.microsoft.com/en-us/azure/ddos-protection/ddos-protection-overview) should be enabled to safeguard AI services from potential disruptions and downtime caused by distributed denial of service attacks. Enable Azure DDoS protection at the virtual network level to defend against traffic floods targeting internet-facing applications.|
|  N-R2  | **Jump box & Bastion**: The AI Landing Zone should provide guidance and implementation of a jumpbox that can be accessed through [Azure Bastion](https://learn.microsoft.com/en-us/azure/bastion/bastion-overview). In case of an existing platform landing zone, the central jump box and bastion service should be used instead.<br><br>Best Practice:<br><br> AI development access should use a jumpbox within the virtual network of the workload or through a connectivity hub virtual network. Use Azure Bastion to securely connect to virtual machines, interacting with AI services. Azure Bastion provides secure RDP/SSH connectivity without exposing VMs to the public internet. Enable Azure Bastion to ensure encrypted session data and protect access through TLS-based RDP/SSH connections. |
|  N-R3  | **Private Endpoints**: The AI Landing Zone should provide guidance and implementation of a Private endpoint for the AI services it deploys.<br><br>Best Practice:<br><br> No PaaS services or AI model endpoints should be accessible from the public internet. Private endpoints provide private connectivity to Azure services within a virtual network. Private endpoints provide secure, private access to PaaS portals like Azure AI Foundry and Azure Machine Learning Studio. For Azure AI Foundry, Configure the [managed virtual network](https://learn.microsoft.com/en-us/azure/ai-studio/how-to/configure-managed-network) and use [private endpoints](https://learn.microsoft.com/en-us/azure/ai-studio/how-to/configure-private-link). For Azure Open AI, Restrict access to select [virtual networks](https://learn.microsoft.com/en-us/azure/ai-services/cognitive-services-virtual-networks#scenarios) or use [private endpoints](https://learn.microsoft.com/en-us/azure/ai-services/cognitive-services-virtual-networks#use-private-endpoints). For Azure Machine Learning, Create a [secure workspace](https://learn.microsoft.com/en-us/azure/machine-learning/tutorial-create-secure-workspace-vnet) with a virtual network. [Plan for network isolation](https://learn.microsoft.com/en-us/azure/machine-learning/how-to-network-isolation-planning). Follow the [security best practices](https://learn.microsoft.com/en-us/azure/machine-learning/concept-enterprise-security) for Azure Machine Learning. |
|  N-R4  | **Network Security Groups**: The AI Landing Zone should provide guidance and implementation of NSGs on all virtual networks implemented as part of the architecture.<br><br>Best Practice:<br><br> Utilize [network security groups](https://learn.microsoft.com/en-us/azure/virtual-network/network-security-groups-overview) (NSGs) to define and apply access policies that govern inbound and outbound traffic to and from AI workloads. These controls can be used to implement the principle of least privilege, ensuring that only essential communication is permitted. |
|  N-R5  | **App Gateway or Azure Front Door with WAF**: The AI Landing Zone should provide guidance and implementation of an application gateway or front door with WAF for the chat application based on regional or global deployment.<br><br>Best Practice:<br><br>[Azure WAF](https://learn.microsoft.com/en-us/azure/web-application-firewall/overview) helps protect your AI workloads from common web vulnerabilities, including SQL injections and cross-site scripting attacks. Configure Azure WAF on [Application Gateway](https://learn.microsoft.com/en-us/azure/web-application-firewall/ag/ag-overview) for workloads that require enhanced security against malicious web traffic. For Azure AI Services, restrict access to select [virtual networks](https://learn.microsoft.com/en-us/azure/ai-services/cognitive-services-virtual-networks#scenarios) or use [private endpoints](https://learn.microsoft.com/en-us/azure/ai-services/cognitive-services-virtual-networks#use-private-endpoints)|
|  N-R6  | **APIM as AI Gateway:** Provide guidance & implementation of APIM with AI Foundry.<br><br>Best Practice:<br><br>Use [Azure API Management](https://learn.microsoft.com/en-us/azure/api-management/genai-gateway-capabilities#backend-load-balancer-and-circuit-breaker) as a generative AI gateway between client and model endpoints for: token governance, routing, resiliency, content safety, semantic caching, and unified telemetry. Pair with Application Gateway / Front Door + WAF for edge protection.<br><br><u>Core Capabilities</u>:<br>• Token limiting & metering (token-limit + emit-token-metric policies)<br>• Semantic caching (reduce repeated prompt cost)<br>• Backend load balancing & circuit breaker (PTU primary, standard fallback, regional failover)<br>• Content filtering (content safety, profanity guardrails)<br>• Request/response transformation (redact PII in logs)<br><br><u>Policy Structure (Example)</u>:<br>1. Inbound: AuthN (Entra), subscription key quota, token-limit, semantic cache lookup.<br>2. Backends: Priority route list (PTU → standard); circuit breaker around primary.<br>3. Outbound: Emit token metrics, semantic cache store (if eligible), response sanitation.<br><br><u>Implementation Steps</u>:<br>1. Define each model deployment as an APIM backend; label with `deploymentType` (e.g., GlobalProvisioned).<br>2. Create policy fragments (`rate-limits.xml`, `semantic-cache.xml`, `routing-priority.xml`).<br>3. Attach fragments to product or API scope; store in source control for drift detection.<br>4. Enable private networking for APIM; restrict backend access to private endpoints.<br>5. Export token metrics & custom dimensions (`modelName`, `cacheHit`) to Log Analytics / App Insights.<br><br><u>Monitoring & Alerts</u>: Watch sustained 429 (throttle) rate, circuit breaker open duration, cache hit ratio, fallback traffic % (indicates capacity pressure).<br><br>Integrate APIM with Microsoft Entra ID to centralize authentication and ensure least privilege on the [managed identity](https://learn.microsoft.com/en-us/azure/api-management/api-management-howto-use-managed-service-identity). Reference architecture: [Gateway guide](https://learn.microsoft.com/en-us/azure/architecture/ai-ml/guide/azure-openai-gateway-guide).|
|  N-R7  | The AI Landing Zone must implement HTTPS through Azure Application Gateway or Azure Front Door.<br><br>Best Practice:<br><br> Secure connections using TLS protocols help protect data integrity and confidentiality for AI workloads connecting from the internet. Implement HTTPS through Azure Application Gateway or Azure Front Door. Both services provide encrypted, secure tunnels for internet-originating connections.|
|  N-R8  | **Firewall**: The AI Landing Zone must provide guidance & implementation of a UDR to Azure or 3P Firewall.<br><br>Best Practice:<br><br> [Azure Firewall](https://learn.microsoft.com/en-us/azure/firewall/overview) enforces security policies for outgoing traffic before it reaches the internet. Use it to control and monitor outgoing traffic and enable SNAT to conceal internal IP addresses by translating private IPs to the firewall's public IP. It ensures secure and identifiable outbound traffic for better monitoring and security. |
|  N-R9  | **Private DNS Zones**: The AI Landing Zone should provide guidance and implementation of [integrated private endpoints with Private DNS Zones](https://learn.microsoft.com/en-us/azure/private-link/private-endpoint-dns-integration) for proper DNS resolution and successful private endpoint functionality. In the case of the platform landing zone, the central Private DNS Zones will be leveraged instead.<br><br>Best Practice:<br><br> Private DNS zones centralize and secure DNS management for accessing PaaS services within your AI network. Set up Azure policies that enforce private DNS zones and require private endpoints to ensure secure, internal DNS resolutions. If you don't have central Private DNS Zones, DNS forwarding won't work until you manually add conditional forwarding. For example, see [using custom DNS](https://learn.microsoft.com/en-us/azure/machine-learning/how-to-custom-dns) with Azure AI Foundry hubs and Azure Machine Learning workspace. Custom DNS servers manage PaaS connectivity within the network, bypassing public DNS. Configure private DNS zones in Azure to resolve PaaS service names securely and route all traffic through private networking channels. |
|  N-R10  | **Restrict Outbound by default**: The AI Landing Zone should provide guidance and implementation restricting outbound access by default.<br><br>Best Practice:<br><br> Limiting outbound traffic from your AI model endpoints helps protect sensitive data and maintain the integrity of your AI models. For minimizing data exfiltration risks, restricting outbound traffic to approved services or fully qualified domain names (FQDNs), and maintaining a list of trusted sources. You should only allow unrestricted internet outbound traffic if you need access to public machine learning resources, but regularly monitor and update your systems. For more information, see [Azure AI services](https://learn.microsoft.com/en-us/azure/ai-services/cognitive-services-data-loss-prevention), [Azure AI Foundry](https://learn.microsoft.com/en-us/azure/ai-studio/how-to/configure-managed-network), and [Azure Machine Learning.](https://learn.microsoft.com/en-us/azure/machine-learning/how-to-network-isolation-planning#allow-only-approved-outbound-mode) |
|  N-R11  | **Virtual Network**: The AI Landing Zone should provide prescriptive guidance virtual networks, subnets and corresponding IP Address planning for them. |
